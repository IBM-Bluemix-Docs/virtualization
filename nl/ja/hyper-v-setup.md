---



copyright:
  years: 2014, 2018
lastupdated: "2018-08-16"

subcollection: virtualization


---

{:shortdesc: .shortdesc}
{:codeblock: .codeblock}
{:screen: .screen}
{:new_window: target="_blank"}
{:pre: .pre}
{:tip: .tip}
{:table: .aria-labeledby="caption"}

# Hyper-V のセットアップ
{: #setting-up-hyper-v}

Hyper-V をセットアップするプロセスは、Hyper-V の初期構成、仮想マシンの作成、新規仮想マシンのネットワークの構成から成ります。 ここでは、これらのプロセスについてのガイドラインを記載します。

## Hyper-V マネージャーの使用
{: #using-hyper-v-manager}

Hyper-V マネージャーは、Hyper-V の操作に使用する管理コンソールです。 Hyper-V マネージャーで、すべての仮想マシンを作成、始動、停止、削除、構成できます。 この管理コンソールでは、仮想ハード・ディスクを保存するデフォルトの場所と、仮想マシンの構成ファイルを保存するデフォルトの場所の設定も行います。

Hyper-V マネージャーは、Windows の「コントロール パネル」の**「管理ツール」**にあります。 新規にインストールした Windows 2008 では、**「管理ツール」**は「スタート メニュー」の「プログラム」の下にあります。 Hyper-V マネージャー・プログラムを開くと、画面に新規ウィンドウが表示されます。 少し時間をかけて、この画面の内容をよく確認してください。 仮想マシンの構成と使用はすべてここで行います。

## Hyper-V の構成
{: #configuring-hyper-v}

まず確認すべき構成は、仮想ハード・ディスクの保管場所です。 Hyper-V マネージャーのウィンドウでは、左側に**「Hyper-V マネージャー」**とサーバー名が表示されます。 サーバー名をクリックすると、Hyper-V サービスで認識されているサーバー情報が表示されます。 現時点では、仮想マシンを 1 つもインストールしていないので、画面中央には何も表示されません。 画面右側には、**「Hyper-V の設定」**のリンクが表示されています。 このリンクをクリックすると、Hyper-V の基本設定が表示されます。

確認する必要がある主な設定は、**「仮想ハード ディスク」**です。 右側に、仮想ハード・ディスクが保存されるデフォルトの場所が表示されています。 デフォルトの場所は次です。

`C:&#xa5;Users&#xa5;Public&#xa5;Documents&#xa5;Hyper-V&#xa5;Virtual Hard Disks`

仮想マシンを作成するときに、その仮想ハード・ディスクをデフォルトの場所に保存したくない場合は、具体的な場所を指定できます。 例えば、仮想ハード・ディスクを別の大きなドライブ (この例ではドライブ D) の **VirtualMachine** フォルダーに保存したい場合には、このフィールドに `D:&#xa5;VirtualMachine` と入力します。

****

フォルダーを手動で参照して、使用する場所を選択することもできます。 場所を選択したら、**「OK」**をクリックします。

## ネットワーク・デバイスの構成
{: #configuring-network-devices}

仮想ネットワーク・デバイスを構成する前に、プライベート・ネットワークとパブリック・ネットワークに接続されているネットワーク・アダプターを確認します。 スタート・メニューから、**「ネットワーク接続」**をクリックします。 ここに 2 つのネットワーク・デバイスが表示されています。 デバイスに**「PrivateNetwork」**と**「PublicNetwork」**という名前が付いていることに注目してください。 **「PrivateNetwork」**を右クリックし、**「プロパティ」**を選択します。 **「接続方法:」**に、プライベート・ネットワーク・アダプターのデバイス名が表示されます。 仮想プライベート・ネットワーク・デバイスを作成するときにこの名前が必要になるので書き留めておいてください。

### プライベート・ネットワーク・デバイスの構成
{: #configuring-a-private-network-device}

仮想ハード・ディスクを保存するデフォルトの場所を構成したので、次は、仮想マシンで使用する仮想ネットワーク・デバイスを構成する必要があります。 仮想ネットワーク・マネージャーを開くために、Hyper-V マネージャー・ウィンドウの右側にある**「仮想ネットワーク マネージャ」**をクリックします。

このウィンドウを初めて開いたときには、左側の「仮想ネットワーク」には、**「新しい仮想ネットワーク」**というオプションしか表示されません。 右側には、以下の 3 つのオプションが表示されます。
* 外部
* 内部
* プライベート。
**「外部」**が選択されていることを確認し、**「追加」**をクリックします。

他のフィールドへの情報入力に進みます。
* **名前** このネットワーク・デバイスに関連付ける名前。 例えば、この例では、このデバイスが IBM Cloud プライベート・ネットワークに接続されていることを示すために、_プライベート_ を使用します。
* **接続の種類** プライベート・ネットワークに対応するデバイスを選択します。 この名前が、先ほど**「ネットワーク接続」**ウィンドウで確認したデバイス名です。 正しいデバイスを選択したら、**「OK」**をクリックします。 ネットワーク接続が失われる可能性があるという警告が出たら、**「はい」**をクリックして続行します。

### パブリック・ネットワーク・デバイスの構成
{: #configuring-a-public-network-device}

プライベート・ネットワーク・デバイスはもうインストールしました。 次はパブリック・ネットワークに対して上記の手順を繰り返します。 この例では、デバイス名として**パブリック**という名前を使用します。 「接続の種類」で、プライベート・ネットワークのセットアップで使用しなかったほうのネットワーク・デバイスを選択します。 パブリックとプライベートの両方のネットワーク・デバイスを作成したら、**「OK」**をクリックします。

## インストール・メディアの取得
{: #obtaining-installation-media}

仮想ネットワーク・デバイスは作成したので、次はインストール・メディアを取得する必要があります。 この例で使用するインストール・メディアは、CD/DVD イメージ・ファイルです。 IBM Cloud では、Hyper-V で以下のオペレーティング・システムを使用できます。
* Windows 2008
* Windows 2003
* CentOS
* Fedora
* Ubuntu。
**注:** 既にインストール・メディアがある場合は、**仮想マシンの作成**に進みます。

[CentOS ![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](http://centos.org){: new_window}、[Fedora ![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](http://fedoraproject.org/){: new_window}、および [Ubuntu ![外部リンク・アイコン](../../icons/launch-glyph.svg "外部リンク・アイコン")](http://www.ubuntu.com/){: new_window} のインストール・メディアは、それぞれの Web サイトから入手できます。 この 3 つの OS はすべて無料でライセンスされるので、ユーザー側がさらにアクションを取る必要はありません。

## 仮想マシンの作成
{: #creating-a-virtual-machine}

インストール・メディアを用意したので、Hyper-V マネージャーから仮想マシンを作成できます。 **「新規」>「仮想マシン」**をクリックして、**「仮想マシンの新規作成ウィザード」**を開始します。

最初の画面で、**「次へ」**をクリックし、新規仮想マシンの名前を入力します。 この名前は、後から変更できます。 仮想ハード・ディスクの場所を変更できます。 別の場所を指定しない限り、前に設定したデフォルト値が使用されます。 情報を入力したら、**「次へ」**をクリックします。

次は、サーバーにメモリーを割り振る必要があります。 通常は、オペレーティング・システムで規定されている最小推奨メモリーを割り振ります。 割り振るメモリー量を入力したら、**「次へ」**をクリックします。

次は、1 つ目のネットワーク・アダプターを設定します。 仮想マシンに Linux オペレーティング・システムをインストールする場合は、**「接続しない」**を選択します。 Windows をインストールする場合は、**「プライベート」**を選択し、**「次へ」**をクリックします。

仮想ディスクについては、ファイル名、保管場所、およびサイズの設定を変更できます。 適宜変更し、**「次へ」**をクリックします。

インストール・メディアを設定する必要があります。 **「ブート CD/DVD-ROM からオペレーティング システムをインストールする」>「イメージ ファイル (.iso)」**を選択して、インストール・メディアの CD/DVD イメージ・ファイルの場所を設定します。 **「次へ」**をクリックしてサマリーを確認し、**「完了」**をクリックしてウィンドウを閉じます。

最後に、仮想ネットワーク・アダプターを作成する必要があります。 Hyper-v マネージャーの**「仮想マシン」**セクションには、既に新規仮想マシンが表示されています。 新規仮想マシンを右クリックし、**「設定」**をクリックします。

### Windows オペレーティング・システムへの仮想ネットワーク・アダプターの構成
{: #configuring-virtual-network-adapter-for-windows-operating-system}

仮想マシンのハードウェアのリストが表示されました。 リストには、**「ネットワーク アダプター」**と**「プライベート」**が表示されています。 **「接続されていません」**が表示されている場合は、「ネットワーク アダプター」をクリックし、**「プライベート」**を選択し、**「適用」**をクリックします。

次に、**「ハードウェアの追加」>「ネットワーク アダプター」>「追加」**をクリックして、ネットワーク・アダプターをハードウェアに追加します。

右側のペインで、ドロップダウンから**「パブリック」**を選択し、**「OK」**をクリックします。

### Linux オペレーティング・システムへの仮想ネットワーク・アダプターの構成
{: #configuring-virtual-network-adapter-for-linux-operating-system}

仮想マシンのハードウェアのリストが表示されました。 **「ネットワーク アダプター」>「削除」**をクリックし、**「ハードウェアの追加」**をクリックします。 右側のリストが変わります。
リストから、**「レガシ ネットワーク アダプター」**を選択します。 **注:** このオプションは、Linux 仮想マシンで使用されないネットワーク・アダプターとは異なります。
**「追加」**をクリックし、レガシー・ネットワーク・アダプターをハードウェア・リストに追加します。 新規レガシー・ネットワーク・アダプターが自動的に選択されます。
ドロップダウン・リストから**「プライベート」**を選択し、**「適用」**をクリックします。
上記の手順を繰り返して**レガシ ネットワーク アダプター**を追加します。 ただし、**「パブリック」**を選択してください。
新規レガシー・ネットワークを追加したら、**「OK」**をクリックします。

## ゲスト・オペレーティング・システムのインストール
{: #installing-a-guest-operating-system}

仮想マシンを開始できるようになりました。 仮想マシンを右クリックし、**「接続」**を選択します。 仮想マシン・コンソールが開きます。 **「アクション」**メニューから、**「開始」**を選択します。 選択したインストール・メディアを使用して、新規仮想マシンが始動します。 次は、オペレーティング・システムのインストールを実行します。 OS のインストール・プロセス中に、パブリック・ネットワークの設定を構成することをお勧めします。 パブリック・ネットワークは、2 番目のネットワーク・インターフェースです。 OS のインストールが完了したときには、仮想マシンが稼働しています。 パブリック・ネットワークが構成されていれば、仮想マシンにリモートからアクセスできます。

インストール・プロセスの最後の手順は、プライベート・ネットワークの構成です。 仮想マシンをプライベート・ネットワークに接続しない場合、インストール・プロセスは完了です。 プライベート・ネットワークの構成方法について詳しくは、[仮想マシン・ネットワークのセットアップ](/docs/infrastructure/virtualization?topic=Virtualization-setting-up-a-virtual-machine-network)を参照してください。
